<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipe od</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .od-identifier-box {
            background: #eaf2fb;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(10,61,145,0.08);
            padding: 2em 2em 1.5em 2em;
            margin: 2em auto 2.5em auto;
            max-width: 420px;
            text-align: center;
        }
        .od-identifier-box input {
            font-size: 1.2em;
            padding: 0.5em 1em;
            border-radius: 8px;
            border: 1px solid #0a3d91;
            margin-bottom: 1em;
            width: 70%;
        }
        .od-identifier-result {
            font-size: 1.2em;
            color: #0a3d91;
            font-weight: bold;
            margin-top: 0.7em;
        }
    </style>
</head>
<body>
    <button class="home-btn" onclick="window.location.href='index.html'">Home</button>
    <!-- Main content -->
    <h1>Pipe OD</h1>
    <div class="od-identifier-box">
        <h2>OD Identifier</h2>
        <label for="od-input">Enter OD (mm):</label><br>
        <input type="number" id="od-input" placeholder="e.g. 114.3">
        <br>
        <label for="material-select" style="display:block; margin-top:0.5em;">Material:</label>
        <select id="material-select" style="font-size:1.1em; padding:0.45em 0.8em; border-radius:8px; border:1px solid #0a3d91; width: 70%;">
            <option value="hdpe">Plastic (HDPE)</option>
            <option value="steel">Steel</option>
        </select>
        <div id="od-result" class="od-identifier-result"></div>
        <div id="pn-options" style="margin-top:0.6em;"></div>
    </div>
    <div id="pn-detail" style="display:none; max-width:560px; margin:0 auto; background:#fff; border:1px solid #cfe0fb; border-radius:12px; padding:1em 1.2em; box-shadow:0 2px 8px rgba(10,61,145,0.08);"></div>
    <p>Below are related documents for Pipe OD. Click to view or download:</p>
    <ul class="pipeod-doc-list">
        <li><a class="pipeod-doc-link" href="pipe od/ANSI pipe schedule.pdf" target="_blank"><span class="doc-icon">ğŸ“„</span>ANSI pipe schedule.pdf</a></li>
        <li><a class="pipeod-doc-link" href="pipe od/Iplex-PVC-U-Pressure-Series-1-Pipe-Dimensions.pdf" target="_blank"><span class="doc-icon">ğŸ“„</span>Iplex-PVC-U-Pressure-Series-1-Pipe-Dimensions.pdf</a></li>
        <li><a class="pipeod-doc-link" href="pipe od/PEPipeSystem.pdf" target="_blank"><span class="doc-icon">ğŸ“„</span>PEPipeSystem.pdf</a></li>
        <li><a class="pipeod-doc-link" href="pipe od/pipe_charts_10S.pdf" target="_blank"><span class="doc-icon">ğŸ“„</span>pipe_charts_10S.pdf</a></li>
    </ul>
        <!-- Footer -->
        <footer style="background: #0a3d91; color: #fff; padding: 2em 0; margin-top: 3em;">
            <div style="max-width: 700px; margin: 0 auto; display: flex; align-items: flex-start; justify-content: space-between; gap: 2em; padding: 0 2em;">
                <!-- å·¦ä¾§LogoåŒºåŸŸ -->
                <div style="flex: 0 0 auto; display: flex; flex-direction: column; align-items: flex-start; gap: 1em;">
                    <img src="access logo.png" alt="Access Logo" style="height: 80px; width: auto;">
                    <div style="font-size: 0.9em; font-weight: 600;">Access M&E Services Sdn Bhd</div>
                    <div style="font-size: 0.9em; opacity: 0.8; max-width: 200px; line-height: 1.4;">
                        Quality Engineering Services
                    </div>
                </div>
                
                <!-- ä¸­é—´è”ç³»ä¿¡æ¯ -->
                <div style="flex: 1; text-align: center; font-size: 0.95em; opacity: 0.9; line-height: 1.6;">
                    <div style="font-weight: 600; margin-bottom: 0.5em; font-size: 1.1em;">Contact Information</div>
                    <div>No.36,Jalan Mutiara Emas 5/11</div>
                    <div>Taman Mount Austin, 81100 Johor Bahru, Johor, Malaysia</div>
                    <div>Phone: +(60)7-351 3720</div>
                    <div style="margin-top: 0.5em;">https://accessmne.github.io/</div>
                </div>
                
                <!-- å³ä¾§æœåŠ¡ä¿¡æ¯ -->
                <div style="flex: 0 0 auto; text-align: right; font-size: 0.9em; opacity: 0.8; line-height: 1.6; max-width: 200px;">
                    <div style="font-weight: 600; margin-bottom: 0.5em; font-size: 1.1em;">Services</div>
                    <div>Steel Piping</div>
                    <div>Non-metalic Piping Fabrication</div>
                    <div>Structure/ Platform Installation</div>
                    <div>Maintenance & Repair Services</div>
                </div>
            </div>
            
            <!-- Disclaimer -->
            <div style="max-width: 700px; margin: 0 auto; padding: 1.5em 2em 0 2em; border-top: 1px solid rgba(255,255,255,0.2); margin-top: 1.5em;">
                <div style="font-size: 0.9em; opacity: 0.8; text-align: center; line-height: 1.5;">
                    <strong>Disclaimer:</strong> The information provided in this OD Identifier is for reference purposes only. 
                    While we strive to ensure accuracy, we cannot guarantee the completeness or reliability of the data. 
                    Users should verify all specifications with official documentation before making any decisions.
                </div>
            </div>
        </footer>
    <script>
        const odTable = [
            {nominal: 'Â½â€ DN15', mm: 21.3},
            {nominal: 'Â¾â€ DN20', mm: 26.7},
            {nominal: '1â€ DN25', mm: 33.4},
            {nominal: '1 Â¼â€ DN32', mm: 42.2},
            {nominal: '1 Â½â€ DN40', mm: 48.3},
            {nominal: '2â€ DN50', mm: 60.3},
            {nominal: '2 Â½â€ DN65', mm: 73.0},
            {nominal: '3â€ DN80', mm: 88.9},
            {nominal: '3 Â½â€', mm: 101.6},
            {nominal: '4â€ DN100', mm: 114.3},
            {nominal: '5â€ DN125', mm: 141.3},
            {nominal: '6â€ DN150', mm: 168.3},
            {nominal: '8â€ DN200', mm: 219.1},
            {nominal: '10â€ DN250', mm: 273.1},
            {nominal: '12â€ DN300', mm: 323.9},
            {nominal: '14â€ DN350', mm: 355.6},
            {nominal: '16â€ DN400', mm: 406.1},
            {nominal: '18â€ DN450', mm: 457.0},
            {nominal: '20â€ DN500', mm: 508.0},
            {nominal: '22â€ DN550', mm: 559.0},
            {nominal: '24â€ DN600', mm: 610.0},
            {nominal: '30â€ DN750', mm: 762.0}
        ];
        // HDPE å°ºå¯¸ï¼ˆISO 4427 / MS 1058 å¸¸è§å¤–å¾„ï¼‰
        const hdpeSizes = [20,25,32,40,50,63,75,90,110,125,140,160,180,200,225,250,280,315,355,400];
        const pnToSdr = { 'PN16': 11, 'PN12.5': 13.6, 'PN10': 17 };
        const densityHDPE = 950; // kg/m^3

        function roundTo(value, decimals) {
            const p = Math.pow(10, decimals);
            return Math.round(value * p) / p;
        }

        function findNearestHdpeOd(inputOd) {
            let nearest = null;
            let minDiff = Infinity;
            for (const od of hdpeSizes) {
                const diff = Math.abs(od - inputOd);
                if (diff < minDiff) {
                    minDiff = diff;
                    nearest = od;
                }
            }
            // å®¹å·® Â±1mm è®¤ä¸ºåŒ¹é…
            return (minDiff <= 1) ? nearest : null;
        }

        function calcHdpeWallThickness(od, sdr) {
            // SDR = OD / t => t = OD / SDR
            return od / sdr;
        }

        function calcHdpeWeightPerMeter(od, t) {
            // å•ä½ï¼šod, t ä¸º mmï¼›æ¢ç®—åˆ° m è®¡ç®—ä½“ç§¯
            const od_m = od / 1000;
            const t_m = t / 1000;
            const id_m = Math.max(od_m - 2 * t_m, 0);
            const area = Math.PI * (Math.pow(od_m, 2) - Math.pow(id_m, 2)) / 4; // m^2
            const volumePerMeter = area * 1; // m^3/m
            const mass = volumePerMeter * densityHDPE; // kg/m
            return mass;
        }

        function renderPnChips(pns, onClick) {
            const container = document.getElementById('pn-options');
            container.innerHTML = '';
            for (const pn of pns) {
                const a = document.createElement('button');
                a.textContent = pn;
                a.style.margin = '0.25em';
                a.style.padding = '0.4em 0.8em';
                a.style.border = '1px solid #0a3d91';
                a.style.background = '#fff';
                a.style.color = '#0a3d91';
                a.style.borderRadius = '999px';
                a.style.cursor = 'pointer';
                a.onclick = () => onClick(pn);
                container.appendChild(a);
            }
        }

        function showPnDetail(contentHtml) {
            const box = document.getElementById('pn-detail');
            box.innerHTML = contentHtml;
            box.style.display = 'block';
        }

        function clearPnDetail() {
            const box = document.getElementById('pn-detail');
            box.style.display = 'none';
            box.innerHTML = '';
        }

        function updateIdentifier() {
            clearPnDetail();
            const val = parseFloat(document.getElementById('od-input').value);
            const material = document.getElementById('material-select').value;
            const resultEl = document.getElementById('od-result');
            const pnContainer = document.getElementById('pn-options');
            pnContainer.innerHTML = '';

            if (isNaN(val)) {
                resultEl.textContent = '';
                return;
            }

            if (material === 'hdpe') {
                const nearest = findNearestHdpeOd(val);
                if (nearest === null) {
                    resultEl.textContent = 'æœªæ‰¾åˆ°åŒ¹é…çš„ HDPE å¤–å¾„ (Â±1mm)';
                    return;
                }
                const label = 'd' + nearest + ' HDPE, MS 1058 / ISO 4427';
                resultEl.textContent = label;
                const pns = ['PN10','PN12.5','PN16'];
                renderPnChips(pns, (pn) => {
                    const sdr = pnToSdr[pn];
                    const t = calcHdpeWallThickness(nearest, sdr);
                    const tRounded = roundTo(t, 1);
                    const w = calcHdpeWeightPerMeter(nearest, tRounded);
                    const wRounded = roundTo(w, 2);
                    const html = `
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.4em;">
                            <div style="font-weight:700; color:#0a3d91;">${'d'+nearest} ${pn} (SDR ${sdr})</div>
                            <button onclick="(function(){document.getElementById('pn-detail').style.display='none'})()" style="border:none; background:#f3f6fc; color:#0a3d91; padding:0.3em 0.6em; border-radius:6px; cursor:pointer;">Close</button>
                        </div>
                        <div style="line-height:1.8;">
                            <div><strong>Standard</strong>: MS 1058 / ISO 4427 (PE100)</div>
                            <div><strong>OD</strong>: ${nearest} mm</div>
                            <div><strong>Wall thickness</strong>: ~${tRounded} mm</div>
                            <div><strong>Approx. weight</strong>: ${wRounded} kg/m</div>
                            <div style="font-size:0.9em; opacity:0.8; margin-top:0.4em;">æ³¨ï¼šå£åšä¸ºæŒ‰ SDR è®¡ç®—çš„è¿‘ä¼¼å€¼ï¼Œå®é™…è¡¨åˆ—å€¼å¯èƒ½å››èˆäº”å…¥ã€‚é‡é‡ä¸ºç†è®ºå€¼ï¼Œç”¨å¯†åº¦ 0.95 g/cmÂ³ ä¼°ç®—ã€‚</div>
                        </div>
                        <div style="margin-top:0.6em;">
                            <a class="pipeod-doc-link" href="pipe od/PEPipeSystem.pdf" target="_blank">å‚è€ƒæ–‡æ¡£ï¼šPE Pipe System</a>
                        </div>
                    `;
                    showPnDetail(html);
                });
            } else if (material === 'steel') {
                // ä½¿ç”¨ç°æœ‰ ANSI/ASME B36.x åç§°è¡¨è¿›è¡ŒåŒ¹é…ï¼ˆÂ±5mm å®¹å·®ï¼‰
                let found = null;
                for (const row of odTable) {
                    if (Math.abs(row.mm - val) <= 5) {
                        found = row;
                        break;
                    }
                }
                if (!found) {
                    resultEl.textContent = 'No matching nominal size (Â±5mm)';
                    return;
                }
                resultEl.textContent = `${found.nominal} (OD: ${found.mm} mm), ASME B36.10/B36.19`;
                renderPnChips(['SCH 10S','SCH 40','SCH 80'], (sch) => {
                    const html = `
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.4em;">
                            <div style="font-weight:700; color:#0a3d91;">${found.nominal} ${sch}</div>
                            <button onclick="(function(){document.getElementById('pn-detail').style.display='none'})()" style="border:none; background:#f3f6fc; color:#0a3d91; padding:0.3em 0.6em; border-radius:6px; cursor:pointer;">Close</button>
                        </div>
                        <div style="line-height:1.8;">
                            <div><strong>Standard</strong>: ASME B36.10 (CS) / B36.19 (SS)</div>
                            <div><strong>OD</strong>: ${found.mm} mm</div>
                            <div>è¯·å‚è€ƒå³ä¾§æ–‡æ¡£åˆ—è¡¨ä¸­çš„ ANSI pipe schedule æˆ– 10S å›¾è¡¨ä»¥è·å–å£åšä¸é‡é‡ã€‚</div>
                        </div>
                        <div style="margin-top:0.6em;">
                            <a class="pipeod-doc-link" href="pipe od/ANSI pipe schedule.pdf" target="_blank">ANSI pipe schedule.pdf</a>
                            <span style="margin:0 0.4em;">|</span>
                            <a class="pipeod-doc-link" href="pipe od/pipe_charts_10S.pdf" target="_blank">pipe_charts_10S.pdf</a>
                        </div>
                    `;
                    showPnDetail(html);
                });
            }
        }

        document.getElementById('od-input').addEventListener('input', updateIdentifier);
        document.getElementById('material-select').addEventListener('change', updateIdentifier);
    </script>
</body>
</html>
